model Session {
  id                  String    @map("id")                   @id @default(uuid()) @db.Uuid
  hashingRefreshToken String?   @map("hashing_refreshtoken") @db.VarChar(255)
  userAgent           String    @map("user_agent")           @unique @db.VarChar(1000)
  userIp              String?   @map("user_ip")              @db.VarChar(100)
  createdAt           DateTime  @map("created_at")           @default(now()) @db.Timestamptz()
  updatedAt           DateTime  @map("updated_at")           @updatedAt @db.Timestamptz()

  loginedAt           DateTime? @map("logined_at")           @db.Timestamptz()
  logoutedAt          DateTime? @map("logouted_at")          @db.Timestamptz()

  //                  relation
  userId              String    @map("user_id")              @db.Uuid
  user                User      @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@index([userId])
  @@map("session")
}

model Code {
  id        String   @map("id")         @id @default(uuid()) @db.Uuid
  code      String   @map("code")       @db.VarChar(10)
  type      CodeType @map("type")
  expiresAt DateTime @map("expires_at") @db.Timestamptz()
  isUsed    Boolean  @map("is_used")    @default(false)

  createdAt DateTime @map("created_at") @default(now()) @db.Timestamptz()
  updatedAt DateTime @map("updated_at") @updatedAt @db.Timestamptz()

  //        relation
  userId    String   @map("user_id")    @db.Uuid
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@index([userId])
  @@index([code, type])
  @@map("code")
}

enum CodeType {
    VERIFY_EMAIL
    RESET_PASSWORD
    CHANGE_EMAIL
}
