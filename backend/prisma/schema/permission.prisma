model Role {
    id   String @id @default(uuid()) @db.Uuid
    name String @unique

    userRoles      UserRole[]
    RolePermission RolePermission[]
}

// m to m user-role
model UserRole {
    userId String @db.Uuid
    user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    roleId String @db.Uuid
    role   Role   @relation(fields: [roleId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    @@id([userId, roleId])
}

model Permission {
    id        String           @id @default(uuid()) @db.Uuid
    name      String           @unique
    rolePerms RolePermission[]
}

model RolePermission {
    roleId       String @db.Uuid
    permissionId String @db.Uuid

    role       Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)
    permission Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)

    @@id([roleId, permissionId])
}
